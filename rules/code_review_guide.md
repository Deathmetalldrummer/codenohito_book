Code Review guide
=================

**Первая польза ревью кода &mdash; сохранение понятности, читаемости кода.**
Ревью проходит код, понятный уже минимум двум людям, а значит поймёт и третий и
остальные. Ну и, зная, что твой код будут читать, сложнее поддаться соблазну
написать его неаккуратно.

**Вторая польза ревью кода &mdash; распространение знаний.**
Читающий код может узнать новое для себя или передать своё знание автору,
предложив более оптимальный код для решения задачи.

**Третья польза ревью кода &mdash; подстраховка проекта.**
Со знанием проекта автором кода, ревьюеру не сравниться, но, всё же, знает он
его лучше программиста, который никогда код проекта в глаза не видел. Поэтому
ревьюер может подстраховать проект, если автор заболеет, например.


Автору кода
-----------

Нужно стараться, чтобы весь ваш код проходил ревью вашего коллеги. Исключениями
являются хотфиксы мелких ошибок, вроде опечаток или удаления кода дебага и
незначительные правки кода, который уже был отревьюен.

Если ревьюер оставил вам пометки, которые вы решили учесть и переписали код,
настоятельно рекомендуется повторно запросить ревью кода.

Пометки ревьюера не являются для вас задачами, а лишь рекомендациями. Вы можете
отказаться, если считаете, что изменять код в соответствии с конкретной
рекомендацией не нужно. В этом случае нужно объяснить своё решение ревьюеру и
прийти к согласию. Если не получается самим решить вопрос &mdash; можно привлечь
руководителя.


Ревьюеру
--------

Вы должны быть в курсе архитектуры проекта, поэтому вам важно участвовать в
планировании работ и, желательно, в оценке задач проекта.

Вполне корректно и нормально в процессе ревью спрашивать автора кода, чтобы он
объяснил непонятные моменты.

Старайтесь, по возможности, проводить ревью в течении суток с момента запроса от
автора. Но не стоит бросать все дела и начинать ревью кода, как только вам
пришел запрос &mdash; это может сильно сказаться на вашей собственной
продуктивности.

Советы по процессу проведения ревью кода в порядке важности:

1. Обратите внимание на понятность кода. Поводом для пометки автору могут стать
   неподходящие названия методов и переменных, неожиданное размещение кода и
   всё, что сильно усложняет понимание кода;

2. Обратите внимание на архитектуру/дизайн кода (именно кода, а не приложения):
   как организованы модули и классы, где размещены функции. Поводом для пометки
   автору может быть некорректное размещение кода (метод для вьюхи в модели,
   например), слишком большие методы, которые стоит разбить на несколько и
   подобное;

3. Отмечайте нарушения стиля кода, описанного в style-гайдах нашей команды;

4. Ну и, конечно, если в процессе ревью заметите баг или опечатку, укажите на
   него &mdash; вам скажут спасибо. Но помните, это ревью именно кода, а не
   приложения и проверка корректности работы кода в ревью не входит &mdash;
   это задача тестирования.

Достаточно хорошие советы некого MarkCC из статьи [«Вещи, которые должен делать
каждый: Code Review»](https://habrahabr.ru/post/215119/) на Хабрахабре просто
процитирую:

> «... Самая распространенная ошибка в CR у новичков это проверять код,
  основываясь на том как бы это сделал он. Обычно существует несколько путей
  решения одного и того же. Помимо этого, есть миллион способов написать
  задуманное в виде кода. Задача reviewerа, не сделать так, чтобы написанный код
  был похож на то, чтобы он написал, нет — он никогда не будет таким. Задача
  reviewerа — удостовериться в том, что код, написанный автором корректен.
  Когда нарушается это правило, вы в итоге придете к эмоциям и переживаниям,
  что не является тем, к чему вы стремитесь.

> Дело в том, что это совершенно естественная ошибка. Если вы программист, когда
  вы смотрите на проблему в коде, вы можете сразу видеть способ ее решить и вы
  думаете, что то, что вы увидели и есть решение. Но это не так, и чтобы стать
  хорошим reviewerом нужно это понять.

> Второй по значимости подводный камень то, что люди чувствуют необходимость
  сказать что-либо. Вы знаете, что автор потратил достаточно времени и сил,
  работая над кодом и вроде как вы должны высказать свое мнение.

> Нет, вы не должны.

> Вполне нормально просто сказать «Выглядит хорошо». Если вы постоянно пытаетесь
  найти что-нибудь покритиковать, тогда все чего вы добьетесь так это подорвать
  свой авторитет и поломать отношения в команде. Когда вы критикуете код только
  для того чтобы найти что сказать, тогда люди чей код вы проверяете поймут, что
  вы пишете только для того чтобы что-то написать и ваши комментарии не будут
  воспринимать всерьез...»


Всем
----

Обсуждайте сам код, а не разработчиков, которые его писали.
Уважайте своих коллег.

Оскорбления в ходе ревью недопустимы. Каждый, кого оскорбили в процессе ревью
кода, будь он автор кода или ревьюер, **обязан** сделать замечание оскорбившему
или сообщить об этом руководителю.
